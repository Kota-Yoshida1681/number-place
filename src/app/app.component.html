<div class="content">
  <div class="title">
    <h2>ナンプレ{{mode==="create" ? "作成" : "解答"}}</h2>
  </div>
  <div class="main">
    <table>
      <tbody>
        <tr *ngFor="let row of datas; index as row_i">
          <td *ngFor="let data of row; index as line_i" [ngClass]="row_i+'_'+line_i">
            <app-square
              (click)="clickSquare(row_i*9+line_i)"
              [mode]="mode" 
              [context]="data" 
              [forcused]="row_i*9+line_i === forcusIndex"
              [highlighted]="(data.given || data.answer) === forcusNumber"
              [valid]="valids[row_i*9+line_i]"
            />
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  <div class="footer">
    <div [hidden]="mode==='memo'">
      <div>
        <button class="btn" (click)="inputNum('1')">1</button>
        <button class="btn" (click)="inputNum('2')">2</button>
        <button class="btn" (click)="inputNum('3')">3</button>
        <button class="btn" (click)="inputNum('4')">4</button>
        <button class="btn" (click)="inputNum('5')">5</button>
      </div>
      <div>
        <button class="btn" (click)="inputNum('6')">6</button>
        <button class="btn" (click)="inputNum('7')">7</button>
        <button class="btn" (click)="inputNum('8')">8</button>
        <button class="btn" (click)="inputNum('9')">9</button>
        <button class="btn" (click)="inputNum('Backspace')">削除</button>
      </div>
      <div></div>
    </div>
    <div>
      <button class="btn" (click)="changeMode('answer')" [hidden]="mode==='answer'" [disabled]="!given_valid">解答</button>
      <button class="btn" (click)="changeMode('memo')" [hidden]="mode==='memo'||mode==='create'">メモ</button>
      <button class="btn" (click)="changeMode('create')" [hidden]="mode==='create'">問題の修正</button>
    </div>
    <div>
      <button class="btn" (click)="autoAnswer()" [hidden]="mode==='create'">自動解答</button>
      <button class="btn" (click)="createSample()" [hidden]="mode!=='create'">サンプル作成</button>
      <button class="btn" (click)="resetAnser()" [hidden]="mode=='create'">解答リセット</button>
    </div>
  </div>
</div>